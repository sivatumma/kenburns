enyo.kind({
    name: "cls.registrationView",
    classes: "clsappRegistration auth-dialog-padding",
    published:{
        username:'',
        password:''
    },
    components: [{
            kind: "branding"
        },
        // {name:"redirectPopup", classes:"redirectPopup"},
        {
            name: "heading",
            classes: "heading"
        }, {
            name: "signupViaFacebookText",
            content: "Sign up via Facebook or create an account",
            classes: "subHeading"
        },
        // {kind:"signupUsingFacebookButton", ontap: "doRegistrationViaFacebook"},
        // {name:"clsLineSeparator",   classes:"clsLineSeparator"},
        {
            name: "alertMessgae",
            // content: "Please check your registration credentials ",
            style: "display:none; font-size:80%;color: #0096d6; margin-bottom:10px; width:95%;"
        }, {
            name: "email",
            kind: "enyo.Input",
            content: "",
            placeholder: "Username or Email"
        }, {
            name: "password",
            kind: "enyo.Input",
            content: "",
            placeholder: "Password",
            attributes: {
                type: "password"
            }
        }, {
            name: "age",
            kind: "enyo.Input",
            content: "",
            placeholder: "Age",
            onkeyup:"ageValidator"
        }, {
            name: "gender",
            kind: "Select",
            classes: "genderSelect",
            style: "display:block;",
            content: "",
            onchange: "selectChanged",
            components: [{
                    content: "Sex",
                    value: "0",
                    classes: "left"
                }, {
                    content: "Male",
                    value: "male"
                }, {
                    content: "Female",
                    value: "female"
                },
                // {content: "Other", value: "O"},
            ]
        }, {
            name: "termsCheckbox",
            kind: "enyo.Checkbox",
            classes: "inline termsCheckbox"
        }, {
            classes: "termsAgreement inline",
            components: [{
                content: "I agree to the ",
                classes: "termsAgreement inline",
            }, {
                content: "Terms of Use.",
                classes: "inline link",
                ontap: "showTerms",
            }]
        }, {
            kind: "Button",
            classes: "clsappRegistrationSubmitButton",
            content: "Register",
            ontap: "handleFormSubmission"
        }, {
            content: strings_en_US.register.loginPointerText,
            classes: "loginPointerText inline",
            style: "font-size:90%;"
        }, {
            tag: "a",
            content: "Log In",
            ontap: "showLoginScreen",
            classes: "inline anchor"
        }, {
        kind: "enyo.Lightbox",
        name: "termsOfUsePopup",
        classes: "termsOfUsePopup",
        components: [{
            kind: "Scroller",
            style: "height: 100%",
            components: [{
                classes: "content",
                content: "All contents are Copyright Â© 1992-2014 Cisco and/or its affiliates. All rights reserved."
            }, {    
                classes: "content",
                content:  "No portion of this service may be reproduced in any form, or by any means, without prior written permission from Cisco and/or its affiliates."
            }, {
                classes: "title",
                content:  "1. Rules and Regulations."
            }, {
                classes: "content",
                content:  "The following rules and regulations apply to all visitors to or users of this Web Site. By accessing this Web Site, user acknowledges acceptance of these terms and conditions. Cisco reserves the right to change these rules and regulations from time to time at its sole discretion. In the case of any violation of these rules and regulations, Cisco reserves the right to seek all remedies available by law and in equity for such violations. These rules and regulations apply to all visits to the Cisco Web Site, both now and in the future."
            }, {
                classes: "title",
                content: "2. Limited License."
            }, {
                classes: "content",
                content: "Cisco hereby authorizes you to copy materials published by Cisco on this Web Site solely for non-commercial use within your organization (or if you are a Cisco Partner, your customer's organization) in support of Cisco products. No other use of the information is authorized. In consideration of this authorization, you agree that any copy of these materials which you make shall retain all copyright and other proprietary notices in the same form and manner as on the original. Except as specified above, nothing contained herein shall be construed as conferring by implication, estoppel or otherwise any license or right under any patent, trademark or copyright of Cisco or any third party."
            }, {
                classes: "intense",
                content: "ALL CONTENTS ON THIS SITE ARE PROTECTED BY COPYRIGHT. EXCEPT AS SPECIFICALLY PERMITTED HEREIN, NO PORTION OF THE INFORMATION ON THIS WEB SITE MAY BE REPRODUCED IN ANY FORM, OR BY ANY MEANS, WITHOUT PRIOR WRITTEN PERMISSION FROM CISCO. VISITORS OR USERS ARE NOT PERMITTED TO MODIFY, DISTRIBUTE, PUBLISH, TRANSMIT OR CREATE DERIVATIVE WORKS OF ANY MATERIAL FOUND ON THIS SITE FOR ANY PUBLIC OR COMMERCIAL PURPOSES."
            }, {
                classes: "title",
                content: "3. Compliance With Applicable Laws; Export Control Laws."
            }, {
                classes: "content",
                content: "User access to this Web Site is governed by all applicable federal, state and local laws. All information available on the Web Site is subject to U.S. export control laws and may also be subject to the laws of the country where you reside."
            }, {
                classes: "content",
                content: "All Cisco products and publications are commercial in nature. Use duplication, or disclosure by the United States Government is subject to the restrictions set forth in DFARS 252.227-7015 and FAR 52.227-19."
            }, {
                classes: "title",
                content: "4. Trademarks."
            }, {
                classes: "content",
                content: "The trademarks, logos and service marks ('Marks') displayed on this Web Site are the property of Cisco or other third parties. Users are not permitted to use these Marks without the prior written consent of Cisco or such third party which may own the Mark. 'Cisco' is a registered trademark of Cisco and/or its affiliates."
            }, {
                classes: "title",
                content: "5. General Disclaimer."
            }, {
                classes: "content",
                content: "Although Cisco has attempted to provide accurate information on the Web Site, Cisco assumes no responsibility for the accuracy of the information. Cisco may change the programs or products mentioned at any time without notice. Mention of non-Cisco products or services is for information purposes only and constitutes neither an endorsement nor a recommendation."
            }, {
                classes: "intense",
                content: "ALL INFORMATION PROVIDED ON THIS WEB SITE IS PROVIDED 'AS IS' WITH ALL FAULTS WITHOUT WARRANTY OF ANY KIND, EITHER EXPRESSED OR IMPLIED. CISCO AND ITS SUPPLIERS DISCLAIM ALL WARRANTIES, EXPRESSED OR IMPLIED INCLUDING, WITHOUT LIMITATION, THOSE OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OR ARISING FROM A COURSE OF DEALING, USAGE, OR TRADE PRACTICE."
            }, {
                classes: "intense",
                content: "CISCO AND ITS SUPPLIERS SHALL NOT BE LIABLE FOR ANY INDIRECT, SPECIAL, CONSEQUENTIAL, OR INCIDENTAL DAMAGES INCLUDING, WITHOUT LIMITATION, LOST PROFITS OR REVENUES, COSTS OF REPLACEMENT GOODS, LOSS OR DAMAGE TO DATA ARISING OUT OF THE USE OR INABILITY TO USE THIS SITE OR ANY CISCO PRODUCT, DAMAGES RESULTING FROM USE OF OR RELIANCE ON THE INFORMATION PRESENT, EVEN IF CISCO OR ITS SUPPLIERS HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES."
            }, {
                classes: "title",
                content: "6. Disclosure; Forward-Looking Statements."
            }, {
                classes: "content",
                content: "Some of the information on this Web Site may contain projections or other forward-looking statements regarding future events or the future financial performance of the Company. We wish to caution you that these statements are only predictions and that actual events or results may differ materially. We refer you to the documents the Company files from time to time with the Securities and Exchange Commission, specifically, the Company's most recent Form 10-K, Form 10-Q, and Form 10-Q/A. These documents contain and identify important factors that could cause the actual results to differ materially from those contained in our projections or forward-looking statements, including, among others, potential fluctuations in quarterly results, dependence on new product development; rapid technological and market change, acquisition strategy, manufacturing risks, risks associated with Internet infrastructure, volatility of stock price, financial risk management, and future growth subject to risks."
            }, {
                classes: "title",
                content: "7. Cookies"
            }, {
                classes: "content",
                content: "A cookie is a small data file that certain Web sites write to your hard drive when you visit them. A cookie file can contain information such as a user ID that the site uses to track the pages you've visited, but the only personal information a cookie can contain is information you supply yourself. A cookie can't read data off your hard disk or read cookie files created by other sites. Some parts of CCO use cookies to track user traffic patterns. We do this in order to determine the usefulness of CCO information to our users and to see how effective our navigational structure is in helping users reach that information. Cisco Systems does not correlate this information with data about individual users, nor does it share this information or sell it to any third party."
            }, {
                classes: "content",
                content: "If you prefer not to receive cookies on CCO, you can set your browser to warn you before accepting cookies and refuse the cookie when your browser alerts you to its presence. You can also refuse all cookies by turning them off in your browser. You do not need to have cookies turned on to use any area of CCO."
            }, {
                classes: "title",
                content: "8. Products and Services Availability."
            }, {
                classes: "content",
                content: "Because international information is provided at this Web Site, not all products or programs mentioned will be available in your country. Please contact your local sales representative for information as to products and services available in your country."
            }, {
                classes: "title",
                content: "9. Links to Third Party Sites."
            }, {
                classes: "content",
                content: "This Web Site may contain links to third party sites. Access to any other Internet site linked to this Web Site is at the user's own risk and Cisco is not responsible for the accuracy or reliability of any information, data, opinions, advice or statements made on these sites. Cisco provides these links merely as a convenience and the inclusion of such links does not imply an endorsement."
            }, {
                classes: "title",
                content: "10. Acceptable Use."
            }, {
                classes: "content",
                content: "Access to and use of password protected and/or secure areas of the Web Site are restricted to authorized users only. Unauthorized individuals attempting to access these areas of the Web Site, or individuals/users attempting to access areas of the Web Site that they do not have rights of access to, may be subject to prosecution. You agree that you will not use the Web Site (a) in furtherance of or with intent to commit any fraudulent or other illegal activities, or otherwise in violation of any applicable law, regulation, legal agreement or Cisco's published policies; or (b) in a manner that is abusive of Cisco programs or other information on the Web Site."
            }, {
                classes: "title",
                content: "11. Member Account, Password and Security."
            }, {
                classes: "content",
                content: "Where you have created an account in the Web Site, you confirm that the account information you have provided is truthful and accurate. You must keep your account password and information confidential and not share it with any other person. If you lose your password or become aware of access to your account other than by you, you agree to notify Cisco immediately. If you become aware of or should reasonably know about use of your password or account by any person other than you, and if you do not notify Cisco immediately of such use, you will be responsible for any and all liability incurred by Cisco or any other user of this Web Site due to unauthorized use. If Cisco believes that your account has been compromised, Cisco may require you to update your password. Further, Cisco may suspend or limit the use of your account, refuse to provide services, and/or place a hold on any transactions. In the event Cisco reasonably believes that your actions affect other users or third parties, Cisco may warn such other users or third parties, including law enforcement. Cisco may also investigate any perceived misuse of your account, refer matters to law enforcement, and/or take other legal action."
            }, {
                classes: "title",
                content: "12. Software License Agreement."
            }, {
                classes: "content",
                content: "Any software which you download is governed in accordance with (i) the license terms accompanying the file or (ii) if no license terms accompany the file, the terms of the license agreement which accompanied the original product licensed by you which you are updating or (iii) the license terms pursuant to this End User License Agreement."
            }, {
                classes: "title",
                content: "13. Copyright Policy/DMCA."
            }, {
                classes: "content",
                content: "You may not post, modify, distribute, or reproduce in any way copyrighted or other proprietary materials without obtaining the prior written consent of the copyright owner of such materials. We may terminate an account, deny access to a site or service, or terminate any user who is alleged to have infringed the copyright or proprietary rights of another."
            }, {
                classes: "content",
                content: "Without limiting the foregoing, if you believe that your copyright or other rights have been infringed, please provide our Designated Agent written notice with the following information:"
            }, {
                classes: "content",
                content: "1. An electronic or physical signature of the person authorized to act on behalf of the owner of the copyright or other interest"
            }, {
                classes: "content",
                content: "2. A description of the copyrighted work or other work that you claim has been infringed"
            }, {
                classes: "content",
                content: "3. A description of where the material that you claim is infringing is located on our sites, networks or other repositories"
            }, {
                classes: "title",
                content: "4. Your address, telephone number, and email address"
            }, {
                classes: "content",
                content: "5. A written statement by you that you have a good faith belief that the disputed use is not authorized by the copyright owner, its agent, or the law"
            }, {
                classes: "content",
                content: "6. A statement by you, made under penalty of perjury, that the above information in your notice is accurate and that you are the copyright owner or authorized to act on the copyright owner's behalf"
            }, {
                classes: "content",
                content: "Our Designated Agent for notice of claims of copyright infringement can be reached as follows: "
            }, {
                classes: "content",
                allowHtml: true,
                content: "Office of General Counsel<br>Cisco Systems, Inc.<br>170 West Tasman Drive<br>San Jose, CA 95134<br>Attn: Copyright Agent"
            }, {
                classes: "content",
                content: "If the disputed materials were posted by a third party identifiable through reasonable efforts, we will provide reasonable notice to the third party of the charge. If the third party responds with a valid counter-notification, we will provide you with a copy so that you may take any other steps you may consider appropriate."
            }, {
                classes: "title",
                content: "14. Open Source License Notices"
            }, {
                classes: "content",
                content: "Cisco Small Business Products may contain software from the open source community that must be licensed under the specific license terms applicable to such software. For more information, please see http://www.cisco.com/go/osln/."
            }, {
                classes: "title",
                content: "15. Push Notifications acceptance"
            }, {
                classes: "content",
                content: "By using this application on app or browser format, the user accepts to receive push notifications on his/her mobile device."
            }]
        }]
    }],
    create:function(inSender, inEvent){
        this.inherited(arguments);
        if (UserModel.userObject.loggedIn){
             new cls.MainView().renderInto(document.body);
        }
    },
    isNumberKey: function(inEvent, inObject) {
        var charCode = (inEvent.which) ? inEvent.which : inEvent.keyCode;
        if (charCode != 46 && charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

        return true;
    },
    ageValidator:function(inSender, inEvent){
        if(inEvent.keyCode>47 && inEvent.keyCode<58){
            // if(isNaN(parseInt(inSender.value))){
            //     this.$.alertMessgae.show();
            //     this.$.alertMessgae.setContent("Please enter your age. Numbers Please !");
            // }
            // else{
                this.$.alertMessgae.hide();
                return true;
            // }
        }
        else if(inEvent.keyCode===8){
            var charCodeForLastChar=inSender.value.charCodeAt(inSender.value.length-1);;
            if(charCodeForLastChar>47 && charCodeForLastChar<58){
                this.$.alertMessgae.hide();
                return true;
            }
            else{
                this.$.alertMessgae.show();
                this.$.alertMessgae.setContent("Please enter your age. Numbers Please !");
                return true;
            }
        }
        else{
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("Please enter your age. Numbers Please !");
            return true;
        }
    },
    // doRegistrationViaFacebook:function(){
    //     var that = this;
    //     FB.getLoginStatus(function(response) {
    //      that.statusChangeCallback(response);
    //  });
    // },
    registrationSuccess: function(response) {
        this.$.alertMessgae.show();
        localStorage.setItem("registrationComplete", true);
        this.$.alertMessgae.setContent("Success. Automatically logging you in...");
        AnalyticsLogger.logAnalyticsData({
            event: "registrationSuccess"
        });
        enyo.Signals.send("loginFromRegistration",{"username":this.username, "password":this.password});
    },
    registrationError: function(response) {
        var responseText = response.xhrResponse.body;
        if (responseText == 'MAC address missing in body.'){
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent(responseText);
        }else{
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent(responseText);
        }
    },
    // statusChangeCallback: function(response) {
    //     var that = this;
    //     if (response.status === 'connected') {
    //         FB.api('/me', function(response) {
    //             var params = {
    //                 "username": response.id,
    //                 "email": response.email,
    //                 "password": response.password || 'testing',
    //                 "age": response.age,
    //                 "sex": response.sex,
    //                 "gender": response.gender,
    //                 "provider": 'facebook'
    //             };
    //             UserModel.registerUser(params, that.registrationSuccess, that.registrationError, that);
    //         });
    //     } else if (response.status === 'not_authorized') {
    //         // The person is logged into Facebook, but not your app.
    //         FB.login(function(response) {
    //             if (response.authResponse) {
    //                 FB.api('/me', function(response) {
    //                     var params = {
    //                         "username": response.id,
    //                         "email": response.email,
    //                         "password": response.password || 'testing',
    //                         "sex": response.sex,
    //                         "age": response.age,
    //                         "gender": response.gender,
    //                         "provider": 'facebook'
    //                     };
    //                     UserModel.registerUser(params, that.registrationSuccess, that.registrationError, that);
    //                 });
    //             } else {
    //                 this.$.alertMessgae.setContent("You have cancelled the facebook registration process");
    //                 this.$.alertMessgae.show();
    //             }
    //         }, {
    //             scope: 'public_profile,email,user_likes,publish_actions',
    //             return_scopes: true
    //         });

    //     } else {
    //         FB.login(function(response) {
    //             if (response.authResponse) {
    //                 FB.api('/me', function(response) {
    //                     var params = {
    //                         "username": response.id,
    //                         "email": response.email,
    //                         "password": response.password || 'testing',
    //                         "sex": response.sex,
    //                         "age": response.age,
    //                         "gender": response.gender,
    //                         "provider": 'facebook'
    //                     };
    //                     UserModel.registerUser(params, that.registrationSuccess, that.registrationError, that);
    //                 });

    //             } else {
    //                 this.$.alertMessgae.setContent("You have cancelled the facebook registration process");
    //                 this.$.alertMessgae.show();
    //             }
    //         }, {
    //             scope: 'email',
    //             return_scopes: true
    //         });
    //     }
    // },
    handleFormSubmission: function() {
        var email = this.$.email.getValue();    //  .toLowerCase();
        this.username = email;
        var password = this.$.password.getValue();
        this.password = password;
        var age = this.$.age.getValue();
        var gender = this.$.gender.getValue();
        var terms = this.$.termsCheckbox.getValue();

        if (email == '' || email == 'Email') {
            this.$.email.addStyles("border:1px solid red;");
            this.$.email.focus();
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("We require a username or email of you to register");
            return false;
        } else if (password == '' || password == 'Username') {
            this.$.password.addStyles("border:1px solid red;");
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("Please enter a memorable password for yourself");
            return false;
        } else if (age == '' || age == 'Age' ) {
            this.$.age.addStyles("border:1px solid red;");
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("Please enter your age. Numbers Please !");
            return false;
        } else if (gender == '' || gender == 0) {
            this.$.gender.addStyles("border:1px solid red;");
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("We require your gender too");
            return false;
        } else if (terms == false) {
            this.$.alertMessgae.show();
            this.$.alertMessgae.setContent("Please agree our small terms");
            return false;
        } else {
            this.$.email.addStyles("border:1px solid silver;");
            this.$.password.addStyles("border:1px solid silver;");
            this.$.age.addStyles("border:1px solid silver;");
            this.$.gender.addStyles("border:1px solid silver;");
            this.$.alertMessgae.hide();

            var params = {
                "username": email, //  Normal username or an email as a username
                "password": password,
                "age": age,
                "sex": gender,
                "gender": gender,
                "provider": 'web'
            };
            UserModel.registerUser(params, this.registrationSuccess, this.registrationError, this);
        }
        // var cryptedMessage = CryptoJS.SHA3(username + password);

    },

    showLoginScreen: function(inSender, inEvent) {
        enyo.Signals.send("showLoginScreen", {});
    },
    showTerms: function(inSender, inEvent) {
        this.$.termsOfUsePopup.show();
    }
});

//  Face book logo along with our customized text
// enyo.kind({
//     name: "signupUsingFacebookButton",
//     classes: "signupUsingFacebookButton",
//     kind: "Button",
//     components: [{
//         tag: "i",
//         classes: "inline fa fa-facebook"
//     }, {
//         content: "Sign up using Facebook",
//         classes: "inline flogotext subHeading"
//     }]
// });
